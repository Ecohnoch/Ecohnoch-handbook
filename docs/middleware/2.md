# C++与Python 共享内存

PyQt5:

```python
import struct
from PyQt5 import QtCore

shared_mem = QtCore.QSharedMemory()
shared_mem.setKey("test")
shared_mem.create(4*6)
shared_mem.attach()

memtocopy = [0,1,2,3,4,5]

try:

    # Fill in 
    shared_mem.lock()
    shared_mem.data()[:] = memoryview(struct.pack('=6i', *memtocopy))
    shared_mem.unlock()

    # Read out
    shared_mem.lock()
    k = memoryview(shared_mem.data()).cast('i')
    shared_mem.unlock()

    if k[3] == memtocopy[3]:
        print("success!")
    else:
        print("fail!")

finally:

    shared_mem.detach()
```